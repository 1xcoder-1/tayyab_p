import { useState, useEffect } from 'react';
import { motion, AnimatePresence, } from 'framer-motion';
import { Smile, Star, AtSign, X } from 'lucide-react';
import { useLocation, Link } from 'react-router-dom';

const Navbar = () => {

    const [isOpen, setIsOpen] = useState(false);
    const [isWhiteTheme, setIsWhiteTheme] = useState(false);
    const location = useLocation();

    const handleLinkClick = (e: React.MouseEvent, href: string) => {
        setIsOpen(false);

        if (href.startsWith('/#')) {
            const id = href.substring(2);
            if (location.pathname === '/') {
                e.preventDefault();
                const element = document.getElementById(id);
                if (element) {
                    element.scrollIntoView({ behavior: 'smooth' });
                    window.history.pushState(null, '', href);
                }
            }
        }
    };

    useEffect(() => {
        if (isOpen) {
            document.body.style.overflow = 'hidden';
        } else {
            document.body.style.overflow = 'unset';
        }
        return () => {
            document.body.style.overflow = 'unset';
            document.body.style.overflowX = 'hidden';
        };
    }, [isOpen]);

    useEffect(() => {
        const handleScroll = () => {
            if (location.pathname === '/projects/notes-flow') {
                setIsWhiteTheme(true);
                return;
            }
            if (location.pathname === '/projects/water-tracker') {
                setIsWhiteTheme(true);
                return;
            }
            if (location.pathname === '/projects/quran-reader') {
                setIsWhiteTheme(true);
                return;
            }


            const aboutSection = document.getElementById('about');
            const projectsSection = document.getElementById('projects');
            const testimonialsSection = document.getElementById('testimonials');
            const projectsHeader = document.getElementById('projects-header');

            let isWhite = false;

            if (projectsHeader) {
                const headerRect = projectsHeader.getBoundingClientRect();
                if (headerRect.top <= 32 && headerRect.bottom >= 32) {
                    isWhite = true;
                }
            }

            if (aboutSection) {
                const aboutRect = aboutSection.getBoundingClientRect();
                const projectsRect = projectsSection?.getBoundingClientRect();

                const visualBottom = aboutRect.bottom - (aboutRect.height * 0.15);
                let isInsideAbout = aboutRect.top <= 32 && visualBottom >= 32;

                if (projectsRect && projectsRect.top <= 32) {
                    isInsideAbout = false;
                }

                if (isInsideAbout) isWhite = true;
            }

            if (testimonialsSection) {
                const testimonialsRect = testimonialsSection.getBoundingClientRect();
                if (testimonialsRect.top <= 32 && testimonialsRect.bottom >= 32) {
                    isWhite = true;
                }
            }

            setIsWhiteTheme(isWhite);
        };

        window.addEventListener('scroll', handleScroll, { passive: true });
        handleScroll();
        const timer = setTimeout(handleScroll, 100);

        return () => {
            window.removeEventListener('scroll', handleScroll);
            clearTimeout(timer);
        };
    }, [location.pathname]);

    useEffect(() => {
        if (location.pathname === '/projects/notes-flow') {
            setIsWhiteTheme(true);
        }
    }, [location.pathname]);

    const menuItems = [
        { icon: <Smile size={28} strokeWidth={1.5} />, label: 'About', href: '/#about' },
        { icon: <Star size={28} strokeWidth={1.5} />, label: 'Work', href: '/#projects' },
        { icon: <AtSign size={28} strokeWidth={1.5} />, label: 'Contact', href: '/#contact' },
    ];



    return (
        <>
            <motion.nav
                initial={{ y: -100, opacity: 0 }}
                animate={{ y: 0, opacity: 1 }}
                transition={{ duration: 0.8, ease: [0.16, 1, 0.3, 1] }}
                className="fixed top-0 left-0 w-full h-[64px] px-6 lg:px-12 flex justify-between items-center z-[1000] bg-transparent backdrop-blur-[20px] border-b border-white/[0.03] transition-colors duration-300"
            >
                <Link to="/" className="flex items-center">
                    <svg
                        className="w-28 h-auto hover:opacity-80 transition-opacity"
                        viewBox="0 0 200 70"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                    >
                        <path
                            d="M52.204 10.632C52.316 10.912 52.148 11.22 51.868 11.304C49.88 11.948 46.912 12.844 43.44 13.908C39.996 14.944 35.992 16.148 32.156 17.352C31.26 20.964 29.916 27.04 28.488 33.424C27.06 39.808 25.604 46.36 24.4 51.428C23.728 54.172 23.196 56.188 22.804 57.616C22.188 59.744 21.88 60.332 21.376 60.332C21.32 60.332 21.292 60.304 21.236 60.304C20.62 60.22 20.48 59.632 20.816 56.02C20.844 55.712 21.096 55.488 21.376 55.516C21.684 55.544 21.908 55.824 21.88 56.104C21.852 56.552 21.796 56.916 21.796 57.252C23.112 52.66 25.548 41.684 27.424 33.2C28.768 27.152 30.056 21.412 30.952 17.716C29.384 18.22 27.844 18.724 26.388 19.2C20.06 21.3 17.932 22.308 17.204 22.756C17.372 22.868 17.484 23.092 17.428 23.316C17.372 23.568 17.148 23.736 16.896 23.736C16.868 23.736 16.84 23.736 16.812 23.736C16.056 23.596 15.888 23.204 15.86 22.924C15.832 22.364 16.28 21.86 18.8 20.796C20.34 20.152 22.524 19.368 25.464 18.36C30.784 16.596 37.644 14.524 43.132 12.872C46.576 11.808 49.572 10.912 51.532 10.296C51.812 10.184 52.12 10.352 52.204 10.632ZM42.8798 36.784C43.1598 36.924 43.2718 37.232 43.1318 37.512C41.7598 40.368 39.7158 43.7 37.8118 43.7C37.6998 43.7 37.5878 43.672 37.4758 43.672C36.2158 43.392 35.4598 41.796 35.1518 38.604C34.5358 39.472 33.6678 40.592 32.7158 41.628C32.4918 41.88 31.7918 42.636 31.0918 42.356C30.6438 42.188 30.4198 41.684 30.4478 40.9C30.5038 38.996 31.9598 34.852 34.1158 34.096C34.7878 33.872 35.7958 33.844 36.8598 35.076C37.0278 35.3 36.9998 35.664 36.7758 35.832C36.5518 36.028 36.2158 36 36.0198 35.776C35.1518 34.768 34.5078 35.02 34.0318 35.356C32.3798 36.532 31.3438 40.284 31.5398 41.264C31.6238 41.208 31.7638 41.096 31.9318 40.9C33.0518 39.696 33.9758 38.408 34.6758 37.456C34.8438 37.204 35.0118 36.98 35.1798 36.784C35.2918 36.588 35.5438 36.532 35.7678 36.588C35.9638 36.644 36.1318 36.84 36.1318 37.064C36.3838 41.964 37.3918 42.552 37.6998 42.608C38.4558 42.748 40.0518 41.376 42.1798 37.036C42.2918 36.784 42.6278 36.672 42.8798 36.784ZM55.4498 36.84C55.6178 37.092 55.5338 37.428 55.2818 37.596C52.5658 39.36 49.7938 41.376 47.1898 43.98C46.0698 50.56 44.8658 55.936 43.5498 60.052C42.4858 63.356 40.8618 67.388 39.0418 67.92C38.9018 67.948 38.7898 67.976 38.6498 67.976C38.2298 67.976 37.8378 67.78 37.5298 67.388C35.9338 65.428 36.5218 58.624 39.7138 52.492C41.6178 48.796 43.8298 45.884 46.1818 43.476C46.4898 41.712 46.7698 39.864 47.0498 37.932C46.5458 38.688 45.9858 39.472 45.3978 40.172C44.2778 41.516 43.3818 41.208 43.0738 40.984C41.8138 40.256 41.7578 37.596 42.9058 34.796C43.0178 34.516 43.3258 34.376 43.6058 34.488C43.8578 34.6 43.9978 34.908 43.8858 35.188C42.7938 37.848 43.1298 39.78 43.6058 40.06C43.8018 40.2 44.1938 39.948 44.5858 39.472C45.6778 38.156 46.9098 36.196 47.4698 35.244C47.5818 35.02 47.8618 34.908 48.0858 34.992C48.3378 35.076 48.5058 35.328 48.4498 35.58C48.1418 37.904 47.8058 40.116 47.4698 42.188C49.8218 40.004 52.2858 38.268 54.6938 36.7C54.9458 36.532 55.2818 36.588 55.4498 36.84ZM42.5138 59.716C43.7178 55.992 44.8378 51.204 45.8458 45.408C43.9698 47.508 42.2338 49.972 40.6658 52.968C37.2778 59.52 37.3618 65.484 38.3698 66.716C38.5378 66.912 38.6498 66.912 38.7618 66.884C39.0418 66.8 40.4978 66.1 42.5138 59.716ZM67.8639 36.84C68.0319 37.092 67.9479 37.428 67.6959 37.596C64.9799 39.36 62.2079 41.376 59.6039 43.98C58.4839 50.56 57.2799 55.936 55.9639 60.052C54.8999 63.356 53.2759 67.388 51.4559 67.92C51.3159 67.948 51.2039 67.976 51.0639 67.976C50.6439 67.976 50.2519 67.78 49.9439 67.388C48.3479 65.428 48.9359 58.624 52.1279 52.492C54.0319 48.796 56.2439 45.884 58.5959 43.476C58.9039 41.712 59.1839 39.864 59.4639 37.932C58.9599 38.688 58.3999 39.472 57.8119 40.172C56.6919 41.516 55.7959 41.208 55.4879 40.984C54.2279 40.256 54.1719 37.596 55.3199 34.796C55.4319 34.516 55.7399 34.376 56.0199 34.488C56.2719 34.6 56.4119 34.908 56.2999 35.188C55.2079 37.848 55.5439 39.78 56.0199 40.06C56.2159 40.2 56.6079 39.948 56.9999 39.472C58.0919 38.156 59.3239 36.196 59.8839 35.244C59.9959 35.02 60.2759 34.908 60.4999 34.992C60.7519 35.076 60.9199 35.328 60.8639 35.58C60.5559 37.904 60.2199 40.116 59.8839 42.188C62.2359 40.004 64.6999 38.268 67.1079 36.7C67.3599 36.532 67.6959 36.588 67.8639 36.84ZM54.9279 59.716C56.1319 55.992 57.2519 51.204 58.2599 45.408C56.3839 47.508 54.6479 49.972 53.0799 52.968C49.6919 59.52 49.7759 65.484 50.7839 66.716C50.9519 66.912 51.0639 66.912 51.1759 66.884C51.4559 66.8 52.9119 66.1 54.9279 59.716ZM78.2899 36.784C78.5699 36.924 78.6819 37.232 78.5419 37.512C77.1699 40.368 75.1259 43.7 73.2219 43.7C73.1099 43.7 72.9979 43.672 72.8859 43.672C71.6259 43.392 70.8699 41.796 70.5619 38.604C69.9459 39.472 69.0779 40.592 68.1259 41.628C67.9019 41.88 67.2019 42.636 66.5019 42.356C66.0539 42.188 65.8299 41.684 65.8579 40.9C65.9139 38.996 67.3699 34.852 69.5259 34.096C70.1979 33.872 71.2059 33.844 72.2699 35.076C72.4379 35.3 72.4099 35.664 72.1859 35.832C71.9619 36.028 71.6259 36 71.4299 35.776C70.5619 34.768 69.9179 35.02 69.4419 35.356C67.7899 36.532 66.7539 40.284 66.9499 41.264C67.0339 41.208 67.1739 41.096 67.3419 40.9C68.4619 39.696 69.3859 38.408 70.0859 37.456C70.2539 37.204 70.4219 36.98 70.5899 36.784C70.7019 36.588 70.9539 36.532 71.1779 36.588C71.3739 36.644 71.5419 36.84 71.5419 37.064C71.7939 41.964 72.8019 42.552 73.1099 42.608C73.8659 42.748 75.4619 41.376 77.5899 37.036C77.7019 36.784 78.0379 36.672 78.2899 36.784ZM88.984 36.728C89.236 36.896 89.292 37.232 89.152 37.484C85.988 42.608 80.668 45.072 77.784 46.108C77.532 46.192 77.28 46.08 77.14 45.884C76.86 46.612 76.608 47.34 76.356 48.068C76.3 48.32 76.076 48.46 75.852 48.46C75.824 48.46 75.796 48.46 75.768 48.46C75.488 48.404 75.292 48.18 75.32 47.9C75.348 46.976 77.812 36 79.324 29.504C79.352 29.448 79.352 29.392 79.38 29.336C79.688 28.02 79.94 26.872 80.164 26.088C81.424 20.908 83.3 16.82 84.504 16.596C84.784 16.54 85.064 16.624 85.232 16.876C86.016 17.968 84.112 23.008 80.388 29.7C79.52 33.452 78.372 38.464 77.532 42.3C78.064 41.236 78.568 40.34 79.072 39.668C80.528 37.596 81.676 36.728 82.544 37.008C82.852 37.092 83.356 37.4 83.384 38.464C83.412 39.612 82.824 41.488 81.62 43.14C84.42 41.488 86.744 39.332 88.228 36.924C88.396 36.672 88.732 36.588 88.984 36.728ZM84.308 18.136C83.636 19.088 82.488 21.384 81.424 25.444C83.3 21.664 84.084 19.256 84.308 18.136ZM77.448 45.072C80.332 44.008 81.872 41.04 82.236 39.304C82.404 38.464 82.264 38.1 82.208 38.044C82.124 38.044 81.452 38.156 79.94 40.284C79.156 41.376 78.26 43.14 77.448 45.072ZM123.609 36.616C123.805 36.84 123.749 37.176 123.497 37.372C120.585 39.444 117.953 41.404 115.573 43.224C115.797 43.98 115.853 44.82 115.657 45.744C114.089 53.668 105.913 59.268 102.161 59.548C102.077 59.548 101.965 59.548 101.881 59.548C100.705 59.548 100.285 58.96 100.145 58.568C99.3053 56.188 104.345 50.644 114.257 42.888C113.025 40.676 109.273 39.052 103.169 36.588C102.441 36.308 101.685 36 100.929 35.692C98.2133 34.572 97.1493 32.584 97.9053 30.12C99.9772 23.568 114.397 14.916 119.493 16.064C120.389 16.288 121.845 16.988 121.509 19.368C121.481 19.676 121.201 19.872 120.893 19.844C120.613 19.788 120.389 19.508 120.445 19.228C120.669 17.66 119.913 17.268 119.241 17.128C117.141 16.652 112.661 18.276 108.097 21.16C103.309 24.212 99.7812 27.768 98.9413 30.456C98.3253 32.388 99.1093 33.788 101.349 34.684C102.105 34.992 102.833 35.3 103.561 35.58C109.245 37.876 113.501 39.612 115.097 42.244C117.449 40.424 120.025 38.492 122.881 36.476C123.105 36.308 123.441 36.364 123.609 36.616ZM114.593 45.548C114.705 44.96 114.733 44.456 114.621 43.952C110.673 47.06 107.509 49.832 105.185 52.212C102.441 54.984 100.873 57.364 101.181 58.204C101.265 58.484 101.797 58.484 102.077 58.484C105.157 58.232 113.081 53.108 114.593 45.548ZM135.502 36.616C135.754 36.756 135.838 37.092 135.67 37.344C131.19 44.624 129.538 44.204 128.978 44.064C127.69 43.728 127.55 41.74 127.522 41.068C127.438 39.78 127.13 39.444 127.018 39.444C127.018 39.444 127.018 39.444 126.99 39.444C126.29 39.444 123.91 42.356 121.474 49.356C121.39 49.552 121.166 49.692 120.942 49.692C120.914 49.692 120.886 49.692 120.858 49.692C120.578 49.636 120.41 49.412 120.41 49.132C120.578 46.612 125.59 26.144 125.646 25.948C126.906 20.768 128.782 16.68 129.986 16.456C130.266 16.4 130.546 16.484 130.714 16.736C131.498 17.828 129.594 22.896 125.842 29.644C124.834 33.788 123.462 39.64 122.51 43.896C124.05 40.676 125.758 38.184 127.186 38.38C128.418 38.548 128.558 40.396 128.586 41.012C128.67 42.384 128.978 42.944 129.258 43.028C129.398 43.056 130.798 43.196 134.774 36.784C134.914 36.532 135.25 36.448 135.502 36.616ZM129.79 17.996C129.118 18.948 127.97 21.272 126.906 25.304C128.782 21.524 129.566 19.116 129.79 17.996ZM146.02 36.784C146.3 36.924 146.412 37.232 146.272 37.512C144.9 40.368 142.856 43.7 140.952 43.7C140.84 43.7 140.728 43.672 140.616 43.672C139.356 43.392 138.6 41.796 138.292 38.604C137.676 39.472 136.808 40.592 135.856 41.628C135.632 41.88 134.932 42.636 134.232 42.356C133.784 42.188 133.56 41.684 133.588 40.9C133.644 38.996 135.1 34.852 137.256 34.096C137.928 33.872 138.936 33.844 140 35.076C140.168 35.3 140.14 35.664 139.916 35.832C139.692 36.028 139.356 36 139.16 35.776C138.292 34.768 137.648 35.02 137.172 35.356C135.52 36.532 134.484 40.284 134.68 41.264C134.764 41.208 134.904 41.096 135.072 40.9C136.192 39.696 137.116 38.408 137.816 37.456C137.984 37.204 138.152 36.98 138.32 36.784C138.432 36.588 138.684 36.532 138.908 36.588C139.104 36.644 139.272 36.84 139.272 37.064C139.524 41.964 140.532 42.552 140.84 42.608C141.596 42.748 143.192 41.376 145.32 37.036C145.432 36.784 145.768 36.672 146.02 36.784ZM156.714 36.728C156.966 36.896 157.022 37.232 156.882 37.484C153.718 42.608 148.398 45.072 145.514 46.108C145.262 46.192 145.01 46.08 144.87 45.884C144.59 46.612 144.338 47.34 144.086 48.068C144.03 48.32 143.806 48.46 143.582 48.46C143.554 48.46 143.526 48.46 143.498 48.46C143.218 48.404 143.022 48.18 143.05 47.9C143.078 46.976 145.542 36 147.054 29.504C147.082 29.448 147.082 29.392 147.11 29.336C147.418 28.02 147.67 26.872 147.894 26.088C149.154 20.908 151.03 16.82 152.234 16.596C152.514 16.54 152.794 16.624 152.962 16.876C153.746 17.968 151.842 23.008 148.118 29.7C147.25 33.452 146.102 38.464 145.262 42.3C145.794 41.236 146.298 40.34 146.802 39.668C148.258 37.596 149.406 36.728 150.274 37.008C150.582 37.092 151.086 37.4 151.114 38.464C151.142 39.612 150.554 41.488 149.35 43.14C152.15 41.488 154.474 39.332 155.958 36.924C156.126 36.672 156.462 36.588 156.714 36.728ZM152.038 18.136C151.366 19.088 150.218 21.384 149.154 25.444C151.03 21.664 151.814 19.256 152.038 18.136ZM145.178 45.072C148.062 44.008 149.602 41.04 149.966 39.304C150.134 38.464 149.994 38.1 149.938 38.044C149.854 38.044 149.182 38.156 147.67 40.284C146.886 41.376 145.99 43.14 145.178 45.072ZM167.242 36.728C167.494 36.896 167.55 37.232 167.41 37.484C164.246 42.608 158.926 45.072 156.042 46.108C155.79 46.192 155.538 46.08 155.398 45.884C155.118 46.612 154.866 47.34 154.614 48.068C154.558 48.32 154.334 48.46 154.11 48.46C154.082 48.46 154.054 48.46 154.026 48.46C153.746 48.404 153.55 48.18 153.578 47.9C153.606 46.976 156.07 36 157.582 29.504C157.61 29.448 157.61 29.392 157.638 29.336C157.946 28.02 158.198 26.872 158.422 26.088C159.682 20.908 161.558 16.82 162.762 16.596C163.042 16.54 163.322 16.624 163.49 16.876C164.274 17.968 162.37 23.008 158.646 29.7C157.778 33.452 156.63 38.464 155.79 42.3C156.322 41.236 156.826 40.34 157.33 39.668C158.786 37.596 159.934 36.728 160.802 37.008C161.11 37.092 161.614 37.4 161.642 38.464C161.67 39.612 161.082 41.488 159.878 43.14C162.678 41.488 165.002 39.332 166.486 36.924C166.654 36.672 166.99 36.588 167.242 36.728ZM162.566 18.136C161.894 19.088 160.746 21.384 159.682 25.444C161.558 21.664 162.342 19.256 162.566 18.136ZM155.706 45.072C158.59 44.008 160.13 41.04 160.494 39.304C160.662 38.464 160.522 38.1 160.466 38.044C160.382 38.044 159.71 38.156 158.198 40.284C157.414 41.376 156.518 43.14 155.706 45.072ZM174.129 36.644C174.381 36.784 174.465 37.12 174.325 37.372C172.897 39.64 169.677 43.392 167.577 43.392C167.381 43.392 167.185 43.364 166.989 43.28C165.729 42.748 165.589 40.648 166.597 36.7C166.681 36.42 166.961 36.252 167.269 36.308C167.549 36.392 167.717 36.672 167.661 36.98C166.429 41.712 167.325 42.244 167.437 42.3C168.389 42.692 171.525 39.836 173.401 36.812C173.569 36.56 173.877 36.476 174.129 36.644ZM167.521 34.376C166.429 34.32 167.185 33.228 167.773 33.06C168.921 32.668 168.949 34.46 167.521 34.376ZM184.999 36.672C185.251 36.784 185.363 37.12 185.251 37.4C183.431 41.236 179.539 48.124 177.299 48.124C177.159 48.124 177.047 48.096 176.907 48.068C176.123 47.76 175.899 46.668 176.207 44.596C176.459 42.72 177.159 40.004 178.251 36.56C178.223 36.588 178.223 36.588 178.195 36.616C177.047 37.372 175.115 38.632 173.631 37.596C172.175 36.616 172.147 34.684 173.519 32.556C174.191 31.576 175.647 29.868 176.655 30.456C177.299 30.876 177.579 31.968 174.723 36.896C175.619 37.008 176.767 36.252 177.607 35.72C178.391 35.188 178.867 34.88 179.287 35.216C179.735 35.524 179.539 36.112 179.455 36.364C176.291 46.08 177.271 47.032 177.327 47.06C177.999 47.172 181.051 43.7 184.271 36.924C184.383 36.644 184.719 36.532 184.999 36.672ZM173.687 34.74C173.491 35.524 173.631 36 173.827 36.308C175.619 33.2 175.927 31.94 175.983 31.492C175.395 31.828 174.079 33.228 173.687 34.74Z"
                            fill={isWhiteTheme ? "#FFFFFF" : "#000000"}
                            stroke={isWhiteTheme ? "#FFFFFF" : "#000000"}
                            strokeWidth="0.8"
                            className="transition-colors duration-300"
                        />
                    </svg>
                </Link>

                <div
                    className={`absolute left-1/2 -translate-x-1/2 flex items-center gap-2.5 px-4 py-2 text-[16px] font-medium cursor-default select-none transition-colors duration-300 ${isWhiteTheme ? 'text-white' : 'text-[#050a12]'}`}
                >
                    <span className="relative flex h-2 w-2">
                        <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-[#00E676] opacity-40"></span>
                        <span className="relative inline-flex rounded-full h-2 w-2 bg-[#00E676]"></span>
                    </span>
                    Open to work
                </div>

                <div className="flex items-center">
                    <motion.div
                        whileHover={{ scale: 1.05 }}
                        whileTap={{ scale: 0.95 }}
                        onClick={() => setIsOpen(true)}
                        className={`w-[44px] h-[44px] flex flex-col justify-center items-center cursor-pointer shadow-sm transition-all duration-300 ${isWhiteTheme ? 'bg-[#1D1D1D]' : 'bg-white'}`}
                    >
                        <div className="flex flex-col gap-[4px]">
                            <span className={`w-[20px] h-[2px] rounded-[1px] transition-colors duration-300 ${isWhiteTheme ? 'bg-white' : 'bg-[#050a12]'}`}></span>
                            <span className={`w-[20px] h-[2px] rounded-[1px] transition-colors duration-300 ${isWhiteTheme ? 'bg-white' : 'bg-[#050a12]'}`}></span>
                            <span className={`w-[20px] h-[2px] rounded-[1px] transition-colors duration-300 ${isWhiteTheme ? 'bg-white' : 'bg-[#050a12]'}`}></span>
                        </div>
                    </motion.div>
                </div>
            </motion.nav>

            <AnimatePresence>
                {isOpen && (
                    <>
                        <motion.div
                            initial={{ opacity: 0 }}
                            animate={{ opacity: 1 }}
                            exit={{ opacity: 0 }}
                            onClick={() => setIsOpen(false)}
                            className="fixed inset-0 z-[1500] bg-black/5 backdrop-blur-[2px]"
                        />
                        <div className="fixed top-2.5 right-6 lg:right-12 z-[2000] flex flex-col items-end gap-3 pointer-events-none">
                            {/* Close Button - positioned exactly where hamburger was */}
                            <motion.button
                                onClick={() => setIsOpen(false)}
                                whileHover={{ scale: 1.05 }}
                                whileTap={{ scale: 0.95 }}
                                className="w-[44px] h-[44px] flex items-center justify-center bg-white shadow-sm relative z-50 pointer-events-auto"
                            >
                                <X size={24} className="text-[#050a12]" />
                            </motion.button>

                            <motion.div
                                initial={{ opacity: 0, scale: 0.8, y: -20, filter: 'blur(10px)' }}
                                animate={{ opacity: 1, scale: 1, y: 0, filter: 'blur(0px)' }}
                                exit={{ opacity: 0, scale: 0.8, y: -20, filter: 'blur(10px)' }}
                                transition={{
                                    duration: 0.5,
                                    ease: [0.23, 1, 0.32, 1],
                                }}
                                className="fixed inset-0 w-full h-full md:w-[280px] md:h-auto md:static bg-white/60 backdrop-blur-xl md:backdrop-blur-none md:bg-white md:shadow-[0_30px_60px_rgba(0,0,0,0.12)] flex flex-col overflow-hidden origin-top-right md:border border-black/5 z-40 pointer-events-auto"
                            >
                                <div className="flex flex-col gap-8 px-10 py-12 justify-center items-center h-full md:justify-start md:items-stretch md:h-auto">
                                    {menuItems.map((item, index) => (
                                        <motion.div
                                            key={index}
                                            initial={{ opacity: 0, y: 15 }}
                                            animate={{ opacity: 1, y: 0 }}
                                            transition={{
                                                delay: 0.05 * index + 0.1,
                                                duration: 0.4,
                                                ease: "easeOut"
                                            }}
                                        >
                                            <Link
                                                to={item.href}
                                                onClick={(e) => handleLinkClick(e, item.href)}
                                                className="flex items-center gap-6 group"
                                            >
                                                <div className="text-[#050a12] group-hover:scale-110 transition-transform duration-300">
                                                    {item.icon}
                                                </div>
                                                <span className="text-[32px] md:text-[20px] font-semibold text-[#050a12] tracking-tight group-hover:translate-x-2 transition-transform duration-300">
                                                    {item.label}
                                                </span>
                                            </Link>
                                        </motion.div>
                                    ))}
                                </div>
                            </motion.div>
                        </div>
                    </>
                )}
            </AnimatePresence>
        </>
    );
};

export default Navbar;


